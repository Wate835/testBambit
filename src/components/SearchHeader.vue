<template>
  <div class="mb-6 flex gap-4 items-center">
    <input
      :value="modelValue"
      @input="handleInput"
      type="text"
      placeholder="–í–≤–µ–¥–∏—Ç–µ ID –∞–ª—å–±–æ–º–æ–≤ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª"
      class="input-field flex-1"
    />
    <button
      @click="$emit('search')"
      class="btn"
      :disabled="loading"
    >
      {{ loading ? '–ó–∞–≥—Ä—É–∑–∫–∞...' : '–ü–æ–∏—Å–∫' }}
    </button>
    <button
      @click="$emit('toggleTheme')"
      class="btn"
    >
      {{ darkMode ? 'üåû' : 'üåô' }}
    </button>
  </div>
</template>

<script setup>
import { defineProps, defineEmits } from 'vue'

// –ü—Ä–æ–ø—Å—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
const props = defineProps({
  // –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è –≤–≤–æ–¥–∞
  modelValue: {
    type: String,
    required: true
  },
  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
  loading: {
    type: Boolean,
    default: false
  },
  // –†–µ–∂–∏–º —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã
  darkMode: {
    type: Boolean,
    default: false
  }
})

// –°–æ–±—ã—Ç–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
const emit = defineEmits(['update:modelValue', 'search', 'toggleTheme'])

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–≤–æ–¥–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
const handleInput = (event) => {
  const value = event.target.value
  // –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã –∏ –ø—Ä–æ–±–µ–ª—ã
  const filteredValue = value.replace(/[^\d\s]/g, '')
  emit('update:modelValue', filteredValue)
}
</script> 